<!doctype html>
<html>

<head>
    <title>소프트웨어공학과 챗봇</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
        }

        .logo {
            position: absolute;
            top: 0;
            left: 0;
        }
        .text {
            width: 50%;
            height: 30px;
            position: absolute;
            font-size: 30px;
            top: 0;
            left: 40%;
        }


        .admin{
            position: absolute;
            top: 0;
            right: 0;
            font-size: 30px;
        }
        
        #chat-container {
            width : 100%;
            margin: 50px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        #chat-display {
            width: calc(100% - 40px);
            padding: 20px;
            height: 600px;
            overflow-y: auto;
            border-bottom: 1px solid #ddd;
        }

        #user-input {
            width: calc(100% - 40px);
            padding: 10px;
            border: none;
            border-top: 1px solid #ddd;
            outline: none;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #61678c;
            color: #fff;
            border: none;
            border-top: 1px solid #ddd;
            cursor: pointer;
        }

        button:hover {
            background-color: #000000;
        }

        .input-container input[type="text"] {
            width: 700px;
            height : 50px;
            margin: 10px;
            border-radius: 10px;
        }

        .input-container input[type="password"] {
            width: 100px;
            height : 50px;
        }

        .notice-title{
            font-size: 30px;
            padding: 5px;
        }
        
        .notice-content{
            font-size: 20px;
            padding: 5px;
        }
    </style>
</head>

<body>
    <!--소프트웨어공학과 홈페이지 -->
    <div class="logo">
        <a href="https://software.jbnu.ac.kr/software/index.do">
            <img src="https://software.jbnu.ac.kr/sites/software/images/logo.png" alt="JBNU_SW"></a>
    </div>

    <div class="text">
        소프트웨어공학과 챗봇
    </div>

    <!--관리자 페이지--->
    <div class="admin">
        <a href="/admin_page">
            관리자 페이지
        </a>
    </div>

    <!-- 메인 화면  -->
    <header>
        <div>
            <div id="chat-container">
                <div id="chat-display"></div>
                <div id="input-container">
                    <input type="text" id="user-input" placeholder="메시지를 입력하세요" />
                    <button onclick="sendMessage()">전송</button>
                </div>
            </div>

            <script>
                function sendMessage() {
                    var user_input = document.getElementById('user-input').value;
                    document.getElementById('user-input').value = '';

                    var chat_display = document.getElementById('chat-display');
                    chat_display.innerHTML += '<p class="user-message">사용자: ' + user_input + '</p>';

                    var xhr = new XMLHttpRequest();
                    xhr.open('POST', ' ', true);
                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState == 4) {
                            if (xhr.status == 200) {
                                var response = JSON.parse(xhr.responseText).response;
                                chat_display.innerHTML += '<p class="chatbot-message">챗봇: ' + response + '</p>';
                            } else {
                                console.error('서버 응답 오류:', xhr.status);
                            }
                        }
                    };

                    xhr.send('user_input=' + encodeURIComponent(user_input));
                }
            </script>
        </div>
    </header>

    <!-- 공지사항 -->
    <section>
        <div class="notice-part">
            <div class="notice-title">
                공지 사항
            </div>
            
            <div class="notice-content">공지 내용 들어갈 부분 (예정)</div>
        </div>


    </section>
    <script>
        function sendMessage() {
                var user_input = document.getElementById('user-input').value;
                document.getElementById('user-input').value = '';

                var chat_display = document.getElementById('chat-display');
                chat_display.innerHTML += '<p class="user-message">사용자: ' + user_input + '</p>';

                var xhr = new XMLHttpRequest();
                xhr.open('POST', ' ', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            var response = JSON.parse(xhr.responseText).response;
                            chat_display.innerHTML += '<p class="chatbot-message">챗봇: ' + response + '</p>';
                        } else {
                            console.error('서버 응답 오류:', xhr.status);
                        }
                    }
                };

                xhr.send('user_input=' + encodeURIComponent(user_input));
            }

        // Enter 키 이벤트 처리
        document.getElementById('user-input').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>

</html>